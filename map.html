<!DOCTYPE html>
<html lang="ru">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Карта RPM</title>
    <link rel="icon" href="img/UniLogo.png" type="image/png">
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" />
    <style>
        body,
        html {
            margin: 0;
            padding: 0;
            width: 100%;
            height: 100vh;
            height: 100dvh;
            background: #3C5D9C;
            font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif;
            overflow: hidden;
            position: fixed;
        }

        #map {
            height: 100vh;
            height: 100dvh;
            width: 100%;
            background: #3C5D9C;
        }

        .leaflet-popup-content {
            font-size: 16px;
            margin: 12px 15px;
            font-weight: bold;
        }

        .leaflet-popup-content-wrapper {
            background: rgba(30, 30, 30, 0.95);
            color: #fff;
            border-radius: 10px;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.5);
        }

        .leaflet-bar a {
            width: 44px !important;
            height: 44px !important;
            line-height: 44px !important;
        }

        .zone-label {
            position: absolute;
            bottom: 20px;
            left: 50%;
            transform: translateX(-50%);
            z-index: 1000;
            background: rgba(0, 0, 0, 0.7);
            color: white;
            padding: 8px 16px;
            border-radius: 20px;
            pointer-events: none;
            display: none;
        }
    </style>
</head>

<body>

    <div id="zone-display" class="zone-label"></div>
    <div id="map"></div>

    <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>
    <script>
        const imgWidth = 2550;
        const imgHeight = 1619;
        const imgUrl = 'map.png';
        const bounds = [[0, 0], [imgHeight, imgWidth]];
        const zonesData = {"type":"FeatureCollection","features":[{"type":"Feature","properties":{"name":"Зеленая зона"},"geometry":{"type":"Polygon","coordinates":[[[710.496531,887.497431],[686.748756,872.762133],[85.007592,872.511704],[85.257265,1139.77869],[100.009949,1233.524265],[115.74928,1267.007137],[125.748167,1275.499429],[128.000916,1289.245432],[137.499084,1319.249001],[175.999738,1425.500856],[263.00432,1430.05681],[339.001309,1431.050529],[382.506153,1430.548816],[405.504189,1409.51513],[426.501178,1414.495432],[440.500262,1422.498573],[455.00144,1437.057951],[479.509294,1449.569656],[494.010341,1449.573938],[508.505498,1443.078791],[540.254909,1442.831789],[589.752029,1445.590496],[629.001178,1441.603057],[648.001964,1427.811948],[660.499215,1405.502284],[666.499607,1375.53597],[674.999738,1340.030546],[678.999869,1302.019127],[682.499476,1284.519983],[700.995026,1261.511704],[708.749411,1236.753426],[710.242604,1198.750999],[709.74784,1152.254139],[710.997447,1128.753997],[714.999411,1115.003997],[714.494371,1086.997716],[715.247055,1014.000999],[714.247382,974.249144],[712.495026,932.497003],[710.496531,887.497431]]]}},{"type":"Feature","properties":{"name":"Коричневая зона"},"geometry":{"type":"Polygon","coordinates":[[[85.007592,872.261847],[93.255694,811.241578],[99.507723,799.504853],[88.25792,791.257993],[88.008574,694.291108],[91.758116,595.557951],[88.262632,478.505424],[105.758509,451.257565],[104.258182,334.973594],[368.756676,332.974878],[450.238546,326.225877],[543.991818,323.494148],[575.241491,341.484584],[595.495942,393.235869],[616.500131,433.757137],[638.742146,444.235441],[666.491753,465.487725],[676.250065,487.493006],[688.744437,519.99529],[692.994306,556.745718],[700.744764,589.746003],[698.492997,617.746432],[701.745026,666.74429],[706.497382,713.498573],[710.246007,755.021696],[701.000262,789.5],[710.494437,862.776264],[686.748822,872.512133],[85.007592,872.261847]]]}},{"type":"Feature","properties":{"name":"Черная зона"},"geometry":{"type":"Polygon","coordinates":[[[690.034035,1312.033115],[689.495549,1619.064517],[1163.48547,1616.56309],[1162.001047,1315.247573],[690.034035,1312.033115]]]}},{"type":"Feature","properties":{"name":"Золотая зона"},"geometry":{"type":"Polygon","coordinates":[[[876.24928,1312.999001],[879.488546,1292.043535],[842.494502,1273.5344],[800.496793,1230.026549],[761.501636,1204.524265],[738.501636,1171.260563],[719.752291,1143.004425],[714.748211,1115.086162],[714.744371,1087.248002],[715.494109,1050.499286],[714.994306,1013.749429],[714.247447,974.249286],[712.245222,932.497288],[709.996596,887.497431],[686.998691,872.762133],[710.994044,863.010277],[702.246662,789.484156],[710.246924,754.500714],[706.996793,712.747573],[701.245091,666.494005],[698.242997,617.496574],[700.994633,590.496432],[693.244109,556.745861],[689.249935,519.499715],[683.501571,492.016986],[683.994764,399.230873],[1159.502487,395.5],[1166.003142,455.246432],[1167.251636,528.499715],[1158.75072,553.248715],[1155.501702,582.252141],[1156.751767,619.007137],[1159.25072,659.011134],[1161.999542,698.999715],[1157.001178,743.501998],[1156.751309,810.25571],[1156.251374,842.254853],[1166.249018,857.000285],[1166.236386,887.508707],[1174.000916,914.754139],[1169.001244,962.751285],[1165.252225,1006.25],[1152.75144,1041.252427],[1151.751702,1065.752997],[1165.501178,1076.499572],[1159.752814,1092.49686],[1165.251505,1117.749572],[1161.753338,1140.00314],[1179.003076,1149.755281],[1178.253076,1203.99272],[1161.503142,1213.498287],[1164.251113,1231.001142],[1159.500785,1240],[1160.501047,1249.000428],[1157.500916,1278.252997],[1170,1289.75314],[1161.751374,1315.498002],[876.24928,1312.999001]]]}},{"type":"Feature","properties":{"name":"Синяя зона"},"geometry":{"type":"Polygon","coordinates":[[[1841.248691,1100.500428],[1830.252487,1114.000999],[1809.752945,1132.503426],[1791.251047,1139.503568],[1769.2536,1140.245004],[1757.749411,1145.246146],[1731.006283,1180.427775],[1714.5072,1224.94319],[1686.512305,1281.462888],[1659.515709,1305.460319],[1661.511651,1392.002855],[1751.988219,1392.978875],[1752.499869,1431.000285],[1660.25072,1429.999715],[1502.504713,1431.749001],[1502.477092,1469.760134],[1363.998429,1470.499715],[1363.749084,1394.999429],[1332.500458,1395.249144],[1332.000196,1311.499286],[1326.500458,1306.252427],[1344.999018,1298.752284],[1354.490902,1287.689194],[1347.492931,1276.687338],[1349.240771,1261.187624],[1336.244371,1228.695046],[1337.738088,1137.89309],[1292.499804,1138.449185],[1292.23043,1121.486583],[1228.998167,1121.020554],[1229.248495,1038.509992],[1286.241884,1037.785399],[1287.238415,930.47602],[1288.750982,917.498858],[1297.744437,908.486297],[1310.243847,892.478447],[1320.000131,887.748715],[1330.738808,887.734584],[1330.727681,856.759563],[1329.750262,849.750999],[1328.500524,838.750571],[1327.246269,813.247573],[1336.744044,768.492578],[1356.742997,733.998573],[1366.000655,716.749001],[1380.245222,702.752712],[1387.247382,676.998144],[1392.747709,662.253283],[1396.500131,646],[1402.248626,633.260991],[1404.000589,622.499857],[1413.497709,617.012561],[1412.746335,575.74686],[1411.496073,549.754139],[1412.000262,537.499144],[1414.254189,527.996432],[1463.992866,525.996717],[1477.235011,520.766986],[1490.491557,507.009278],[1496.745157,490.260991],[1533.500785,461.00571],[1556.994764,445.091352],[1567.744698,425.331789],[1587.490902,410.829077],[1586.487302,195.543678],[1639.511651,195.77084],[1640.263549,132.983157],[1661.258116,128.498573],[1681.505563,121.745861],[1698.503796,125.249857],[1721.749935,124.998715],[1738.761192,134.258422],[1748.502814,145.447758],[1747.254451,173.710747],[1743.505236,184.708892],[1747.503731,215.723451],[1744.754974,259.739723],[1730.508312,282.490151],[1709.511978,291.238724],[1699.52101,292.473023],[1680.516887,290.217028],[1663.514138,279.452326],[1651.500524,274.000571],[1644.765774,265.187053],[1643.258116,245.206751],[1634.260407,244.962745],[1634.509294,222.199899],[1612.015119,222.20518],[1612.012174,401.808094],[1624.499476,404.249144],[1633.006676,410.512418],[1649.255105,397.502569],[1662.003927,389.751856],[1689.498364,387.002427],[1697.499869,384.251713],[1704.742277,375.510563],[1703.717601,514.274408],[1702.982132,596.036826],[1689.474015,591.533972],[1650.737237,588.773266],[1625.745877,577.255281],[1618.246596,587.755995],[1619.248756,602.504853],[1622.477615,612.702183],[1629.250524,671.762704],[1639.993455,686.484584],[1669.997513,683.232443],[1670.499542,692.736297],[1705.740575,694.731159],[1777.973557,691.684769],[1775.480757,785.478304],[1775.986779,809.744005],[1780.244829,830.251427],[1870.739593,840.750428],[1897.251178,852.500285],[1900.251113,866.000285],[1903.751113,890.750143],[1897.250589,909.999429],[1884.999738,918.251285],[1868.504254,921.24429],[1868.751767,951.251285],[1868.49928,971.5],[1868.249476,984.000571],[1863.999804,994.508707],[1851.255694,1009.512275],[1846.253273,1023.50628],[1844.755956,1037],[1848.499542,1055.25],[1846.50216,1073.506994],[1842.25144,1085.250143],[1841.248691,1100.500428]]]}},{"type":"Feature","properties":{"name":"Голубая зона"},"geometry":{"type":"Polygon","coordinates":[[[1776.00288,810.250571],[1775.746007,785.726163],[1777.973623,691.434769],[1705.740313,694.737439],[1670.504909,692.751427],[1669.998429,683.997288],[1654.996793,685.498144],[1647.498658,685.749715],[1640.000524,686.001285],[1629.271534,671.279832],[1622.227746,612.702326],[1619.226895,602.228018],[1618.225914,587.739295],[1626.244633,577.25],[1650.740444,588.765273],[1689.227288,592.275978],[1702.474604,596.542536],[1703.474474,513.789253],[1705.001047,375.747716],[1716.748887,363.494005],[1748.49928,351.251998],[1780,340.247003],[1826.250327,328.505424],[1850.000262,318.525693],[1852.510211,136.943761],[2016.5,138.511134],[2015.501505,212.524551],[2026.002618,200.521553],[2042.999476,196.751713],[2055.748822,186.768984],[2071.249869,180.751713],[2085.992604,168.514131],[2099.239724,149.009278],[2103.4964,126.744148],[2103.747578,106.746146],[2099.4964,89.994861],[2108.748691,76.259421],[2133.997382,60.253426],[2143.996662,51.249715],[2158.748036,43.745861],[2198.242669,42.75885],[2216.996204,46.005139],[2234.497971,46.763275],[2254.252814,39.011276],[2282.502356,28.007137],[2302.251047,19.004139],[2320.982524,8.206751],[2338.000458,1.998144],[2358.731215,2.199471],[2382.249476,-7.000428],[2417.749411,-2.002141],[2448.745942,10.502997],[2469.749411,15.500999],[2486.250982,16.752427],[2503.500131,22.248287],[2518.748626,32.999286],[2537.252814,56.25571],[2539.001505,81.74843],[2541.501505,123.012133],[2546.751767,157.247859],[2552.250589,179.5],[2555.749018,198.255424],[2550.747578,216.508564],[2529.75648,242.006566],[2525.752029,256.753568],[2531.250982,271.495861],[2536.501309,307.004853],[2549.750982,346.749001],[2552.499935,387.252997],[2551.252029,415.498002],[2546.251767,449.99115],[2546.500458,499.004139],[2543.751898,518.001427],[2550.249215,539.999857],[2549.002356,562.501427],[2540.500916,583.500285],[2541.500458,604.75],[2542.751374,626.501427],[2545.999411,660.750714],[2541.751636,693.999715],[2535.500524,729.25],[2527.000262,764.009563],[2508.003796,800],[2492.749476,813.751713],[2473.605135,821.260991],[2424.751505,842.497145],[2369.25288,837.743577],[2329.758705,850.500999],[2295.256742,849.996289],[2274.754778,841.495147],[2264.75288,843.260848],[2249.500131,845.998144],[2235.252029,855.018128],[2212.000262,863.272124],[2190.99712,858.262846],[2166.994371,859.013846],[2141.246204,860.268841],[2113.496989,860.764559],[2093.246989,861.010848],[2062.998887,855.756851],[2040.499476,847.999572],[2016.996989,849.252712],[1983.992669,859.259421],[1953.999476,852.498144],[1920.24928,852.009706],[1897.751047,852.000285],[1870.24928,840.752997],[1847.000504,837.251533],[1820.001464,834.756899],[1780.002225,829.997716],[1776.00288,810.250571]]]}},{"type":"Feature","properties":{"name":"Жёлтая зона"},"geometry":{"type":"Polygon","coordinates":[[[2333.474081,871.002569],[2238.512436,869.000428],[2238.756611,865.248002],[2194.768065,866.495147],[2194.266101,878.752141],[2178.018981,879.000856],[2167.767672,883.753711],[2137.025068,883.506709],[2132.022843,872.249857],[2105.024348,873.749857],[2082.750262,880.252712],[2063.499738,885.504853],[2062.000393,1001.5],[2063.496989,1117.493434],[2096.249149,1118.002997],[2104.251374,1109.998287],[2122.50288,1107.993434],[2135.5072,1105.494576],[2145.506283,1119.00314],[2170.501047,1109.994005],[2184.000785,1109.996574],[2188.50144,1121.50314],[2203.982982,1122.001142],[2226.481281,1110.494576],[2257.975914,1110.992007],[2280.482328,1120.998287],[2374.011127,1118.494861],[2386.000655,1100.500856],[2396.003011,1082.997716],[2399.003011,1046.482586],[2404.500524,1025.978875],[2397.002356,998.473451],[2396.001964,962.462888],[2390.501964,926.946331],[2379.502356,913.941478],[2360.503796,905.43691],[2333.522254,904.522838],[2333.474081,871.002569]]]}},{"type":"Feature","properties":{"name":"Красная зона"},"geometry":{"type":"Polygon","coordinates":[[[1152.990313,61.951469],[1153.501702,260.995432],[1383.497775,260.496289],[1384.499869,60.998858],[1152.990313,61.951469]]]}}]}

        const map = L.map('map', {
            crs: L.CRS.Simple,
            minZoom: -2.5,
            maxZoom: 2.5,
            attributionControl: false,
            maxBounds: bounds,
            maxBoundsViscosity: 1.0,
            tap: true,
            bounceAtZoomLimits: false
        });

        L.imageOverlay(imgUrl, bounds, { interactive: false }).addTo(map);
        map.fitBounds(bounds);

        const colorMap = {
            "Зеленая зона": "#28a745",
            "Коричневая зона": "#795548",
            "Красная зона": "#dc3545",
            "Черная зона": "#111111",
            "Золотая зона": "#ffc107",
            "Синяя зона": "#007bff",
            "Голубая зона": "#17a2b8",
            "Жёлтая зона": "#ffeb3b"
        };

        function style(feature) {
            const zoneName = feature.properties.name;
            const color = colorMap[zoneName] || "#ffffff";
            return {
                fillColor: color,
                weight: 2,
                opacity: 1,
                color: 'white',
                fillOpacity: 0.2
            };
        }

        function onEachFeature(feature, layer) {
            layer.on({
                click: function (e) {
                    const label = document.getElementById('zone-display');
                    label.innerText = feature.properties.name;
                    label.style.display = 'block';

                    geojson.setStyle(style);
                    layer.setStyle({ fillOpacity: 0.5, weight: 3 });

                    setTimeout(() => { label.style.display = 'none'; }, 3000);
                }
            });
            layer.bindPopup(feature.properties.name);
        }

        const geojson = L.geoJSON(zonesData, {
            style: style,
            onEachFeature: onEachFeature
        }).addTo(map);

        map.on('click', function (e) {
            geojson.setStyle(style);
            map.closePopup();
            const label = document.getElementById('zone-display');
            if (label) label.style.display = 'none';
        });

        window.addEventListener('resize', () => {
            map.invalidateSize();
            map.fitBounds(bounds);
        });

    </script>
</body>

</html>
