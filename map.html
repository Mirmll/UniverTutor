<!DOCTYPE html>
<html lang="ru">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Карта RPM</title>
    <link rel="icon" href="img/UniLogo.png" type="image/png">
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" />
    <style>
        body,
        html {
            margin: 0;
            padding: 0;
            width: 100%;
            height: 100vh;
            height: 100dvh;
            background: #3C5D9C;
            font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif;
            overflow: hidden;
            position: fixed;
        }

        #map {
            height: 100vh;
            height: 100dvh;
            width: 100%;
            background: #3C5D9C;
        }

        .leaflet-popup-content {
            font-size: 16px;
            margin: 12px 15px;
            font-weight: bold;
        }

        .leaflet-popup-content-wrapper {
            background: rgba(30, 30, 30, 0.95);
            color: #fff;
            border-radius: 10px;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.5);
        }

        .leaflet-bar a {
            width: 44px !important;
            height: 44px !important;
            line-height: 44px !important;
        }

        .zone-label {
            position: absolute;
            bottom: 20px;
            left: 50%;
            transform: translateX(-50%);
            z-index: 1000;
            background: rgba(0, 0, 0, 0.7);
            color: white;
            padding: 8px 16px;
            border-radius: 20px;
            pointer-events: none;
            display: none;
        }
    </style>
</head>

<body>

    <div id="zone-display" class="zone-label"></div>
    <div id="map"></div>

    <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>
    <script>
        const imgWidth = 2550;
        const imgHeight = 1619;
        const imgUrl = 'map.png';
        const bounds = [[0, 0], [imgHeight, imgWidth]];

        const zonesData =
        {
            "type": "FeatureCollection",
            "features": [
                {
                    "type": "Feature",
                    "properties": {
                        "name": "Зеленая зона"
                    },
                    "geometry": {
                        "type": "Polygon",
                        "coordinates": [
                            [
                                [
                                    710.496531,
                                    887.497431
                                ],
                                [
                                    686.748756,
                                    872.762133
                                ],
                                [
                                    85.007592,
                                    872.511704
                                ],
                                [
                                    85.257265,
                                    1139.77869
                                ],
                                [
                                    100.009949,
                                    1233.524265
                                ],
                                [
                                    115.74928,
                                    1267.007137
                                ],
                                [
                                    125.748167,
                                    1275.499429
                                ],
                                [
                                    128.000916,
                                    1289.245432
                                ],
                                [
                                    137.499084,
                                    1319.249001
                                ],
                                [
                                    175.999738,
                                    1425.500856
                                ],
                                [
                                    263.00432,
                                    1430.05681
                                ],
                                [
                                    339.001309,
                                    1431.050529
                                ],
                                [
                                    382.506153,
                                    1430.548816
                                ],
                                [
                                    405.504189,
                                    1409.51513
                                ],
                                [
                                    426.501178,
                                    1414.495432
                                ],
                                [
                                    440.500262,
                                    1422.498573
                                ],
                                [
                                    455.00144,
                                    1437.057951
                                ],
                                [
                                    479.509294,
                                    1449.569656
                                ],
                                [
                                    494.010341,
                                    1449.573938
                                ],
                                [
                                    508.505498,
                                    1443.078791
                                ],
                                [
                                    540.254909,
                                    1442.831789
                                ],
                                [
                                    589.752029,
                                    1445.590496
                                ],
                                [
                                    629.001178,
                                    1441.603057
                                ],
                                [
                                    648.001964,
                                    1427.811948
                                ],
                                [
                                    660.499215,
                                    1405.502284
                                ],
                                [
                                    666.499607,
                                    1375.53597
                                ],
                                [
                                    674.999738,
                                    1340.030546
                                ],
                                [
                                    678.999869,
                                    1302.019127
                                ],
                                [
                                    682.499476,
                                    1284.519983
                                ],
                                [
                                    700.995026,
                                    1261.511704
                                ],
                                [
                                    708.749411,
                                    1236.753426
                                ],
                                [
                                    710.242604,
                                    1198.750999
                                ],
                                [
                                    709.74784,
                                    1152.254139
                                ],
                                [
                                    710.997447,
                                    1128.753997
                                ],
                                [
                                    714.999411,
                                    1115.003997
                                ],
                                [
                                    714.494371,
                                    1086.997716
                                ],
                                [
                                    715.247055,
                                    1014.000999
                                ],
                                [
                                    714.247382,
                                    974.249144
                                ],
                                [
                                    712.495026,
                                    932.497003
                                ],
                                [
                                    710.496531,
                                    887.497431
                                ]
                            ]
                        ]
                    }
                },
                {
                    "type": "Feature",
                    "properties": {
                        "name": "Коричневая зона"
                    },
                    "geometry": {
                        "type": "Polygon",
                        "coordinates": [
                            [
                                [
                                    85.007592,
                                    872.261847
                                ],
                                [
                                    93.255694,
                                    811.241578
                                ],
                                [
                                    99.507723,
                                    799.504853
                                ],
                                [
                                    88.25792,
                                    791.257993
                                ],
                                [
                                    88.008574,
                                    694.291108
                                ],
                                [
                                    91.758116,
                                    595.557951
                                ],
                                [
                                    88.262632,
                                    478.505424
                                ],
                                [
                                    105.758509,
                                    451.257565
                                ],
                                [
                                    104.258182,
                                    334.973594
                                ],
                                [
                                    368.756676,
                                    332.974878
                                ],
                                [
                                    450.238546,
                                    326.225877
                                ],
                                [
                                    543.991818,
                                    323.494148
                                ],
                                [
                                    575.241491,
                                    341.484584
                                ],
                                [
                                    595.495942,
                                    393.235869
                                ],
                                [
                                    616.500131,
                                    433.757137
                                ],
                                [
                                    638.742146,
                                    444.235441
                                ],
                                [
                                    666.491753,
                                    465.487725
                                ],
                                [
                                    676.250065,
                                    487.493006
                                ],
                                [
                                    688.744437,
                                    519.99529
                                ],
                                [
                                    692.994306,
                                    556.745718
                                ],
                                [
                                    700.744764,
                                    589.746003
                                ],
                                [
                                    698.492997,
                                    617.746432
                                ],
                                [
                                    701.745026,
                                    666.74429
                                ],
                                [
                                    706.497382,
                                    713.498573
                                ],
                                [
                                    710.246007,
                                    755.021696
                                ],
                                [
                                    701.000262,
                                    789.5
                                ],
                                [
                                    710.494437,
                                    862.776264
                                ],
                                [
                                    686.748822,
                                    872.512133
                                ],
                                [
                                    85.007592,
                                    872.261847
                                ]
                            ]
                        ]
                    }
                },
                {
                    "type": "Feature",
                    "properties": {
                        "name": "Черная зона"
                    },
                    "geometry": {
                        "type": "Polygon",
                        "coordinates": [
                            [
                                [
                                    690.034035,
                                    1312.033115
                                ],
                                [
                                    689.495549,
                                    1619.064517
                                ],
                                [
                                    1163.48547,
                                    1616.56309
                                ],
                                [
                                    1165.984815,
                                    1319.550815
                                ],
                                [
                                    690.034035,
                                    1312.033115
                                ]
                            ]
                        ]
                    }
                },
                {
                    "type": "Feature",
                    "properties": {
                        "name": "Золотая зона"
                    },
                    "geometry": {
                        "type": "Polygon",
                        "coordinates": [
                            [
                                [
                                    873.501702,
                                    1314.750999
                                ],
                                [
                                    879.488546,
                                    1292.043535
                                ],
                                [
                                    842.494502,
                                    1273.5344
                                ],
                                [
                                    800.496793,
                                    1230.026549
                                ],
                                [
                                    761.501636,
                                    1204.524265
                                ],
                                [
                                    738.501636,
                                    1171.260563
                                ],
                                [
                                    719.752291,
                                    1143.004425
                                ],
                                [
                                    714.748211,
                                    1115.086162
                                ],
                                [
                                    714.744371,
                                    1087.248002
                                ],
                                [
                                    715.494109,
                                    1050.499286
                                ],
                                [
                                    714.994306,
                                    1013.749429
                                ],
                                [
                                    714.247447,
                                    974.249286
                                ],
                                [
                                    712.245222,
                                    932.497288
                                ],
                                [
                                    709.996596,
                                    887.497431
                                ],
                                [
                                    686.998691,
                                    872.762133
                                ],
                                [
                                    710.994044,
                                    863.010277
                                ],
                                [
                                    702.246662,
                                    789.484156
                                ],
                                [
                                    710.246924,
                                    754.500714
                                ],
                                [
                                    706.996793,
                                    712.747573
                                ],
                                [
                                    701.245091,
                                    666.494005
                                ],
                                [
                                    698.242997,
                                    617.496574
                                ],
                                [
                                    700.994633,
                                    590.496432
                                ],
                                [
                                    693.244109,
                                    556.745861
                                ],
                                [
                                    689.249935,
                                    519.499715
                                ],
                                [
                                    683.501571,
                                    492.016986
                                ],
                                [
                                    683.994764,
                                    399.230873
                                ],
                                [
                                    1168.997644,
                                    395.499429
                                ],
                                [
                                    1177.996989,
                                    461.499429
                                ],
                                [
                                    1173.482066,
                                    528.899513
                                ],
                                [
                                    1161.991753,
                                    578.432342
                                ],
                                [
                                    1163.498298,
                                    606.498573
                                ],
                                [
                                    1161.990313,
                                    639.453753
                                ],
                                [
                                    1161.499084,
                                    739.995432
                                ],
                                [
                                    1166.249018,
                                    857.000285
                                ],
                                [
                                    1166.236386,
                                    887.508707
                                ],
                                [
                                    1177.497186,
                                    907.467456
                                ],
                                [
                                    1173.734291,
                                    1006.281402
                                ],
                                [
                                    1158.236582,
                                    1037.003854
                                ],
                                [
                                    1158.251505,
                                    1060.501856
                                ],
                                [
                                    1169.984422,
                                    1077.252427
                                ],
                                [
                                    1170.989528,
                                    1118.499857
                                ],
                                [
                                    1174.501636,
                                    1134.502855
                                ],
                                [
                                    1190.728597,
                                    1140.481016
                                ],
                                [
                                    1189.997055,
                                    1216.742578
                                ],
                                [
                                    1168.502618,
                                    1228.977733
                                ],
                                [
                                    1164.501244,
                                    1248.249572
                                ],
                                [
                                    1161.001636,
                                    1273.003854
                                ],
                                [
                                    1169.999411,
                                    1284.255852
                                ],
                                [
                                    1166.984553,
                                    1319.050529
                                ],
                                [
                                    873.501702,
                                    1314.750999
                                ]
                            ]
                        ]
                    }
                },
                {
                    "type": "Feature",
                    "properties": {
                        "name": "Синяя зона"
                    },
                    "geometry": {
                        "type": "Polygon",
                        "coordinates": [
                            [
                                [
                                    1839.749018,
                                    1112.252284
                                ],
                                [
                                    1820.998691,
                                    1126.50314
                                ],
                                [
                                    1782.946067,
                                    1148.912074
                                ],
                                [
                                    1765.975128,
                                    1514.092494
                                ],
                                [
                                    1291.987433,
                                    1512.061092
                                ],
                                [
                                    1217.507069,
                                    1145.033972
                                ],
                                [
                                    1222.000325,
                                    1084.991568
                                ],
                                [
                                    1223.502356,
                                    1020.995432
                                ],
                                [
                                    1242.995157,
                                    972.561663
                                ],
                                [
                                    1245.503665,
                                    840.000285
                                ],
                                [
                                    1312.985993,
                                    817.52084
                                ],
                                [
                                    1313.989528,
                                    781.524836
                                ],
                                [
                                    1329.99424,
                                    736.523123
                                ],
                                [
                                    1361.989135,
                                    698.027406
                                ],
                                [
                                    1383.987564,
                                    656.521696
                                ],
                                [
                                    1396.994633,
                                    614.019412
                                ],
                                [
                                    1396.498822,
                                    542.507993
                                ],
                                [
                                    1420.003404,
                                    490.999429
                                ],
                                [
                                    1485.001178,
                                    435.998858
                                ],
                                [
                                    1479.503273,
                                    84.442049
                                ],
                                [
                                    1784.461252,
                                    87.900369
                                ],
                                [
                                    1781.470154,
                                    338.586214
                                ],
                                [
                                    1744.990575,
                                    348.019412
                                ],
                                [
                                    1717.496989,
                                    363.010848
                                ],
                                [
                                    1704.978008,
                                    375.483585
                                ],
                                [
                                    1707.22179,
                                    447.265558
                                ],
                                [
                                    1703.717601,
                                    514.274408
                                ],
                                [
                                    1702.982132,
                                    596.036826
                                ],
                                [
                                    1689.474015,
                                    591.533972
                                ],
                                [
                                    1650.737237,
                                    588.773266
                                ],
                                [
                                    1625.745877,
                                    577.255281
                                ],
                                [
                                    1618.246596,
                                    587.755995
                                ],
                                [
                                    1619.248756,
                                    602.504853
                                ],
                                [
                                    1622.477615,
                                    612.702183
                                ],
                                [
                                    1629.250524,
                                    671.762704
                                ],
                                [
                                    1639.993455,
                                    686.484584
                                ],
                                [
                                    1669.997513,
                                    683.232443
                                ],
                                [
                                    1670.499542,
                                    692.736297
                                ],
                                [
                                    1705.740575,
                                    694.731159
                                ],
                                [
                                    1777.973557,
                                    691.684769
                                ],
                                [
                                    1775.480757,
                                    785.478304
                                ],
                                [
                                    1775.986779,
                                    809.744005
                                ],
                                [
                                    1780.244829,
                                    830.251427
                                ],
                                [
                                    1870.739593,
                                    840.750428
                                ],
                                [
                                    1901.73187,
                                    852.00314
                                ],
                                [
                                    1904.461121,
                                    865.499715
                                ],
                                [
                                    1907.998298,
                                    890.5
                                ],
                                [
                                    1899.458634,
                                    910.96717
                                ],
                                [
                                    1875.464394,
                                    948.979731
                                ],
                                [
                                    1872.964525,
                                    987.992578
                                ],
                                [
                                    1867.498167,
                                    1037.000285
                                ],
                                [
                                    1847.711645,
                                    1084.997573
                                ],
                                [
                                    1839.749018,
                                    1112.252284
                                ]
                            ]
                        ]
                    }
                },
                {
                    "type": "Feature",
                    "properties": {
                        "name": "Голубая зона"
                    },
                    "geometry": {
                        "type": "Polygon",
                        "coordinates": [
                            [
                                [
                                    1776.00288,
                                    810.250571
                                ],
                                [
                                    1775.746007,
                                    785.726163
                                ],
                                [
                                    1777.973623,
                                    691.434769
                                ],
                                [
                                    1705.740313,
                                    694.737439
                                ],
                                [
                                    1670.504909,
                                    692.751427
                                ],
                                [
                                    1669.998429,
                                    683.997288
                                ],
                                [
                                    1654.996793,
                                    685.498144
                                ],
                                [
                                    1647.498658,
                                    685.749715
                                ],
                                [
                                    1640.000524,
                                    686.001285
                                ],
                                [
                                    1629.271534,
                                    671.279832
                                ],
                                [
                                    1622.227746,
                                    612.702326
                                ],
                                [
                                    1619.226895,
                                    602.228018
                                ],
                                [
                                    1618.225914,
                                    587.739295
                                ],
                                [
                                    1626.244633,
                                    577.25
                                ],
                                [
                                    1650.740444,
                                    588.765273
                                ],
                                [
                                    1689.227288,
                                    592.275978
                                ],
                                [
                                    1702.474604,
                                    596.542536
                                ],
                                [
                                    1703.474474,
                                    513.789253
                                ],
                                [
                                    1705.001047,
                                    375.747716
                                ],
                                [
                                    1716.748887,
                                    363.494005
                                ],
                                [
                                    1745.750458,
                                    347.748144
                                ],
                                [
                                    1780,
                                    340.247003
                                ],
                                [
                                    1827.500393,
                                    318.997716
                                ],
                                [
                                    1851.010996,
                                    273.539396
                                ],
                                [
                                    1852.510211,
                                    136.943761
                                ],
                                [
                                    2016.5,
                                    138.511134
                                ],
                                [
                                    2089.744895,
                                    137.007851
                                ],
                                [
                                    2085.753273,
                                    98.986583
                                ],
                                [
                                    2103.760603,
                                    59.724307
                                ],
                                [
                                    2170.254058,
                                    27.218312
                                ],
                                [
                                    2226.74496,
                                    23.464316
                                ],
                                [
                                    2264.988219,
                                    19.216457
                                ],
                                [
                                    2291.48547,
                                    15.463602
                                ],
                                [
                                    2320.982524,
                                    8.206751
                                ],
                                [
                                    2338.000458,
                                    1.998144
                                ],
                                [
                                    2358.731215,
                                    2.199471
                                ],
                                [
                                    2380.234946,
                                    -6.309093
                                ],
                                [
                                    2489.963281,
                                    12.447044
                                ],
                                [
                                    2547.953856,
                                    46.199043
                                ],
                                [
                                    2553.453136,
                                    160.980302
                                ],
                                [
                                    2554.45654,
                                    230.482871
                                ],
                                [
                                    2533.454969,
                                    250.468883
                                ],
                                [
                                    2553.452482,
                                    348.502284
                                ],
                                [
                                    2558.954576,
                                    419.017129
                                ],
                                [
                                    2552.956147,
                                    465.490008
                                ],
                                [
                                    2550.955623,
                                    515.487154
                                ],
                                [
                                    2557.955492,
                                    559.995718
                                ],
                                [
                                    2543.955623,
                                    582.987725
                                ],
                                [
                                    2547.956671,
                                    623.99686
                                ],
                                [
                                    2547.954576,
                                    694.497145
                                ],
                                [
                                    2522.458765,
                                    800.024836
                                ],
                                [
                                    2430.499476,
                                    847.501427
                                ],
                                [
                                    2320.998298,
                                    856.526835
                                ],
                                [
                                    2275.749789,
                                    824.255519
                                ],
                                [
                                    2242.999187,
                                    823.258279
                                ],
                                [
                                    2212.999414,
                                    824.507512
                                ],
                                [
                                    2179.999545,
                                    835.753373
                                ],
                                [
                                    2145.499252,
                                    834.753526
                                ],
                                [
                                    2126.749626,
                                    827.251073
                                ],
                                [
                                    2101.999837,
                                    835.25322
                                ],
                                [
                                    2081.749919,
                                    842.002453
                                ],
                                [
                                    2058.749984,
                                    843.7523
                                ],
                                [
                                    2025.249886,
                                    841.754139
                                ],
                                [
                                    2005.487637,
                                    844.578803
                                ],
                                [
                                    1956.00013,
                                    842.747394
                                ],
                                [
                                    1917.500228,
                                    834.99816
                                ],
                                [
                                    1887.749821,
                                    833.749847
                                ],
                                [
                                    1847.000504,
                                    837.251533
                                ],
                                [
                                    1820.001464,
                                    834.756899
                                ],
                                [
                                    1780.002225,
                                    829.997716
                                ],
                                [
                                    1776.00288,
                                    810.250571
                                ]
                            ]
                        ]
                    }
                },
                {
                    "type": "Feature",
                    "properties": {
                        "name": "Жёлтая зона"
                    },
                    "geometry": {
                        "type": "Polygon",
                        "coordinates": [
                            [
                                [
                                    2050.968583,
                                    868.470025
                                ],
                                [
                                    2051.968583,
                                    1129.033115
                                ],
                                [
                                    2416.409152,
                                    1127.660152
                                ],
                                [
                                    2418.373022,
                                    864.510563
                                ],
                                [
                                    2050.968583,
                                    868.470025
                                ]
                            ]
                        ]
                    }
                },
                {
                    "type": "Feature",
                    "properties": {
                        "name": "Красная зона"
                    },
                    "geometry": {
                        "type": "Polygon",
                        "coordinates": [
                            [
                                [
                                    1152.990313,
                                    61.951469
                                ],
                                [
                                    1150.990837,
                                    291.98801
                                ],
                                [
                                    1381.975914,
                                    292.988581
                                ],
                                [
                                    1384.499869,
                                    60.998858
                                ],
                                [
                                    1152.990313,
                                    61.951469
                                ]
                            ]
                        ]
                    }
                }
            ]
        }


        const map = L.map('map', {
            crs: L.CRS.Simple,
            minZoom: -2.5,
            maxZoom: 2.5,
            attributionControl: false,
            maxBounds: bounds,
            maxBoundsViscosity: 1.0,
            tap: true,
            bounceAtZoomLimits: false
        });

        L.imageOverlay(imgUrl, bounds, { interactive: false }).addTo(map);
        map.fitBounds(bounds);

        const colorMap = {
            "Зеленая зона": "#28a745",
            "Коричневая зона": "#795548",
            "Красная зона": "#dc3545",
            "Черная зона": "#111111",
            "Золотая зона": "#ffc107",
            "Синяя зона": "#007bff",
            "Голубая зона": "#17a2b8",
            "Жёлтая зона": "#ffeb3b"
        };

        function style(feature) {
            const zoneName = feature.properties.name;
            const color = colorMap[zoneName] || "#ffffff";
            return {
                fillColor: color,
                weight: 2,
                opacity: 1,
                color: 'white',
                fillOpacity: 0.2
            };
        }

        function onEachFeature(feature, layer) {
            layer.on({
                click: function (e) {
                    const label = document.getElementById('zone-display');
                    label.innerText = feature.properties.name;
                    label.style.display = 'block';

                    geojson.setStyle(style);
                    layer.setStyle({ fillOpacity: 0.5, weight: 3 });

                    setTimeout(() => { label.style.display = 'none'; }, 3000);
                }
            });
            layer.bindPopup(feature.properties.name);
        }

        const geojson = L.geoJSON(zonesData, {
            style: style,
            onEachFeature: onEachFeature
        }).addTo(map);

        map.on('click', function (e) {
            geojson.setStyle(style);
            map.closePopup();
            const label = document.getElementById('zone-display');
            if (label) label.style.display = 'none';
        });

        window.addEventListener('resize', () => {
            map.invalidateSize();
            map.fitBounds(bounds);
        });

    </script>
</body>

</html>
